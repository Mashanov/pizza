<!DOCTYPE html>
<html lang="ru">
	<head>
		<meta charset="utf-8">
		<title>Ресторан || пиццерия || кухня</title>
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<style>
			* { margin: 0; padding: 0;}
			#background {
				width: 100%;
				height: calc(100% - 150px);
				position: fixed;
				top: 0;
				left: 0;
				background: repeating-linear-gradient(30deg, #ffa74f, #ffbf7f);
				filter: blur(0.2px);
			}

			.window {
				background-image: url('https://cdn-icons-png.flaticon.com/512/609/609832.png');
				background-size: contain;
				background-repeat: no-repeat;
				background-position: 50%;
				width: 150px;
				height: 150px;
				position: fixed;
				margin: 0 auto;
				bottom: calc(50% - 75px);
				left: 0;
				right: 0;
			}

			#backgroundMenu {
				background: repeating-linear-gradient(30deg, #007eff, aquamarine);
				width: 100%;
				height: 100%;
				position: fixed;
				top: 0;
				left: 0;
			}
			
			#backgroundTable {
				background: repeating-linear-gradient(30deg, #5887af, #e6fbff);
				width: 100%;
				height: 100%;
				position: fixed;
				top: 0;
				left: 0;
			}

			#table {
				background-color: #e3ede9;
    			border-top: 1px solid #878080;
				width: 100%;
				height: 150px;
				position: fixed;
				bottom: 0;
				left: 0;
			}

			#cash {
				background-image: url('https://cdn-icons-png.flaticon.com/512/600/600297.png');
				background-size: contain;
				background-repeat: no-repeat;
				background-position: 50%;
				width: 200px;
				height: 200px;
				position: fixed;
				margin: 0 auto;
				bottom: 50px;
				left: 0;
				right: 0;
			}

			#pause {
				position: fixed;
				width: 40px;
				height: 40px;
				background-color: #fff;
				border: 2px solid #000;
				top: 25px;
				left: 25px;
				border-radius: 10px;
				line-height: 40px;
				text-align: center;
				font-size: 150%;
				font-family: fantasy;
				-webkit-text-stroke-width: thin;
				cursor: pointer;
			}

			#moneyBlock {
				position: fixed;
				width: 200px;
				height: 40px;
				background-color: #fff;
				border: 2px solid #000;
				top: 25px;
				left: 85px;
				border-radius: 10px;
				line-height: 40px;
				text-align: center;
				font-size: 150%;
				font-family: fantasy;
			}

			.menu {
				position: relative;
				width: 300px;
				height: 50px;
				color: #000;
				background-color: #fff;
				border-bottom: 4px solid #b1afac;
				border-radius: 20px;
				text-align: center;
				font-size: 120%;
				line-height: 50px;
				font-family: cursive;
				left: 0;
				right: 0;
				margin: 0 auto;
				margin-bottom: 20px;
				top: 250px;
				cursor: pointer;
				font-weight: 700;
			}

			#menuName {
				position: fixed;
				font-size: 300%;
				font-family: cursive;
				left: 0;
				right: 0;
				margin: 0 auto;
				width: 90%;
				text-align: center;
				top: 50px;
				text-shadow: 5px 5px 0px #00000021;
				color: #ff8d00;
				background: #fff;
				border-radius: 30px 60px;
				border-bottom: 4px solid;
			}

			#menuLogo {
				background-image: url('https://cdn-icons-png.flaticon.com/512/6108/6108018.png');
				width: 150px;
				height: 150px;
				background-size: contain;
				background-repeat: no-repeat;
				background-position: 50%;
				position: fixed;
				margin: 0 auto;
				left: 0;
				right: 0;
				top: 60px;
			}

			#house {
				background-image: url('https://cdn-icons-png.flaticon.com/512/1916/1916263.png');
				width: 100%;
				height: 300px;
				background-size: contain;
				background-repeat: no-repeat;
				background-position: 50%;
				position: fixed;
				margin: 0 auto;
				left: 0;
				right: 0;
				bottom: 0;
			}

			#CuttingBoard {
				background-image: url('/images/9.png');
				background-size: contain;
				background-repeat: no-repeat;
				background-position: 50%;
				width: 90%;
				height: 400px;
				position: fixed;
				margin: 0 auto;
				bottom: 20px;
				left: 0;
				right: 0;
			}

			#pizzaBoard {
				background: #b5711e;
				width: 60%;
				height: 200px;
				bottom: 15%;
				left: 0;
				right: 0;
				margin: 0 auto;
				border-radius: 50%;
				position: absolute;
			}

			#pizza {
				background: #ff9900;
				width: 80%;
				height: 160px;
				bottom: 10%;
				left: 0;
				right: 0;
				margin: 0 auto;
				border-radius: 50%;
				position: absolute;
			}

			#ingredients {
				position: fixed;
				top: 25px;
				left: 25px;
				z-index: 1;
			}

			.voiceIngredient {
				position: relative;
				width: 80px;
				height: 80px;
				border: 2px solid #8e99a1;
				display: block;
				float: left;
				margin-left: 10px;
				margin-right: 10px;
				margin-bottom: 20px;
				border-radius: 10px;
				background-size: contain;
				background-repeat: no-repeat;
				background-position: 50%;
			}

			.pepperoni {
				position: fixed;
				width: 30px;
				height: 30px;
				background-image: url('/images/2.png');
				background-size: contain;
				background-repeat: no-repeat;
				background-position: 50%;
				pointer-events: none;
			}

			.mushrooms {
				position: fixed;
				width: 30px;
				height: 30px;
				background-image: url('/images/3.png');
				background-size: contain;
				background-repeat: no-repeat;
				background-position: 50%;
				pointer-events: none;
			}

			.greenery {
				position: fixed;
				width: 30px;
				height: 30px;
				background-image: url('/images/4.png');
				background-size: contain;
				background-repeat: no-repeat;
				background-position: 50%;
				pointer-events: none;	
			}

			.tomatoes {
				position: fixed;
				width: 30px;
				height: 30px;
				background-image: url('/images/5.png');
				background-size: contain;
				background-repeat: no-repeat;
				background-position: 50%;
				pointer-events: none;	
			}

			.cucumber {
				position: fixed;
				width: 30px;
				height: 30px;
				background-image: url('/images/6.png');
				background-size: contain;
				background-repeat: no-repeat;
				background-position: 50%;
				pointer-events: none;	
			}

			#sheese {
				background-size: contain;
				background-repeat: no-repeat;
				background-image: url('/images/8.png');
				background-position: 50%;
				pointer-events: none;
				width: 80%;
				height: 160px;
				bottom: 100px;
				left: 0;
				right: 0;
				margin: 0 auto;
				border-radius: 50%;
				position: absolute;
				filter: hue-rotate(190deg);
    			opacity: 0;
				z-index: 1;
			}

			.downBotton {
				position: absolute;
				width: 45%;
				height: 40px;
				color: #fff;
				outline: none;
				border: 0;
				border-radius: 10px;
				bottom: 20px;
    			display: inline-table;
				text-align: center;
				line-height: 40px;
				font-family: cursive;
				box-sizing: border-box;
				cursor: pointer;
			}

			#user {
				position: absolute;
				width: 250px;
				height: 250px;
				background-size: contain;
				background-repeat: no-repeat;
				background-position: 50%;
				bottom: 0;
				left: 0;
				right: 0;
				margin: 0 auto;
				transition: 1s;
			}

			#message {
				position: absolute;
				background: #fff;
				width: 90%;
				bottom: 420px;
				left: 0;
				right: 0;
				margin: 0 auto;
				border: 2px solid #000;
				box-sizing: border-box;
				padding: 5px;
				border-radius: 10px;
				font-family: cursive;
				overflow-wrap: break-word;
			}

			#ok {
				position: absolute;
				width: 40px;
				height: 40px;
				right: 25px;
				color: #fff;
				background: #007eff;
				outline: none;
				border: 0;
				border-radius: 10px;
				bottom: 400px;
    			display: inline-table;
				text-align: center;
				line-height: 40px;
				font-family: cursive;
				box-sizing: border-box;
				cursor: pointer;
			}

			#notification {
				position: fixed;
				top: 100px;
				left: 0;
				right: 0;
				margin: 0 auto;
				width: fit-content;
				font-size: 300%;
				font-family: cursive;
				transition: 1s;
				opacity: 0;
			}
		</style>
	</head>
	<body>
		<div id="background">
			<div class="window" style="left: 160px;"></div>
			<div class="window" style="right: 160px;"></div>
		</div>
		<div id="user"></div>
		<div id="message"></div>
		<div id="ok" onclick="document.querySelector('#tableGame').style.display = 'block';this.style.display = 'none'">Ок</div>
		<div id="table"></div>
		<div id="cash"></div>
		<div id="pause">||</div>
		<div id="moneyBlock"><mo style="color: rgb(32, 167, 32)">$ </mo>0</div>
		<div id="notification"></div>

		<div id="menu">
			<div id="backgroundMenu"></div>
			<div id="menuLogo"></div>
			<div id="house"></div>
			<div id="menuName">Пиццерия</div>
			<div class="menu" onclick="gameStart ()">Играть</div>
			<div class="menu">Магазин</div>
			<div class="menu">Пригласить друзей</div>
			<div class="menu">Группа игры</div>
		</div>

		<div id="tableGame" style="display: none;">
			<div id="backgroundTable"></div>
			<div id="ingredients">
				<div class="voiceIngredient" onclick="document.querySelector('#pizza').style.background = '#ef8181';" style="background-image: url('/images/1.png')"></div>
				<div class="voiceIngredient" onclick="ingredient = 1" style="background-image: url('/images/2.png')"></div>
				<div class="voiceIngredient" onclick="ingredient = 2" style="background-image: url('/images/3.png')"></div>
				<div class="voiceIngredient" onclick="ingredient = 3" style="background-image: url('/images/4.png')"></div>
				<div class="voiceIngredient" onclick="ingredient = 4" style="background-image: url('/images/5.png')"></div>
				<div class="voiceIngredient" onclick="ingredient = 5" style="background-image: url('/images/6.png')"></div>
				<div class="voiceIngredient" onclick="document.querySelector('#sheese').style.opacity = 0.4" style="background-image: url('/images/7.png')"></div>
			</div>
			<div id="CuttingBoard">
				<div id="pizzaBoard">
					<div onclick="clickPizza ()" id="pizza"></div>
				</div>
			</div>
			<div id="sheese"></div>
			<botton onclick="deletePizza ()" class="downBotton" style="left: 3.3%;background: rgba(255, 255, 255, 0);border: 2px solid #fff">В мусорку</botton>
			<botton onclick="pizzaReady ()" class="downBotton" style="right: 3.3%;background: #ff8d00;">В печь</botton>
		</div>
	</body>

	<script>

		var ingredient = 1,
		ingredients = {

			1: 'pepperoni',
			2: 'mushrooms',
			3: 'greenery',
			4: 'tomatoes',
			5: 'cucumber',
		},
		users = {

			1: [
				
				['Привет, хочу соус и колбаски', ['соус', 'pepperoni']],
				['Мне только пипперони', ['pepperoni']],
				['Здравствуйте, мне бы вашу пиццу с фирменным соусом и нежной колабаской', ['соус', 'pepperoni']],
				['Могу я попробовать пиццу с соусом и пипперони колбасой ?', ['соус', 'pepperoni']],
				['У меня аллергия на соус, мне только колбасу', ['pepperoni']],
				['Я не люблю пиццу, но вашу попробую, мне с колбаской', ['pepperoni']],
				['Я давно не ел пиццу с соусом и пипперони', ['соус', 'pepperoni']],
				['Соус и пипперони, без лишних слов', ['соус', 'pepperoni']],
				['Удиви меня своей пиццей, добавляй любые ингредиенты', ['любая']],
				['Я хочу пиццу, но не знаю что добавить, сделай на свое усмотрение', ['любая']],
				['Срочно ! Сделай мне любую пиццу, я страшно хочу есть', ['любая']],
			],
		},
		voiceUser,
		textRe,
		iText = 1;

		function textRead ()
		{
			document.querySelector('#message').innerText = textRe.substr(0, iText);
			if (textRe.length > iText)
			{
				iText++;
				setTimeout(textRead, 50);

			} else iText = 1;
		}

		function clickPizza (){

			document.querySelector('#tableGame').insertAdjacentHTML ('beforeend', '<div class="' + ingredients[ingredient] + '" style="left: ' + (self.event.pageX - 15) + 'px;top: ' + (self.event.pageY - 15) + 'px;transform: rotate(' + (Math.random () * 360 | 0) + 'deg)"></div>');
		}

		function deletePizza ()
		{

			if (document.querySelector('#sheese[style]')) document.querySelector('#sheese[style]').removeAttribute('style');
			if (document.querySelector('#pizza[style]')) document.querySelector('#pizza[style]').removeAttribute('style');
			for (var element of document.querySelectorAll('#tableGame > div[style][class]'))
			{

				element.remove ();
			}
		}

		function gameStart ()
		{

			document.querySelector('#user').style.backgroundImage = 'url(/images/users/' + (Math.random () * 10 | 0 + 1) + '.png)';
			document.querySelector('#menu').style.display = 'none';
			document.querySelector('#user').style.bottom = '170px';

			voiceUser = users[1][(Math.random() * users[1].length | 0)];

			textRe = voiceUser[0];
			textRead ();
			document.querySelector('#ok').style.display = 'block';
		}

		function pizzaReady ()
		{

			document.querySelector('#tableGame').style.display = 'none';

			if (voiceUser[1][0] == 'любая') result ('Хорошая пицца', +1);
			else {

				for (var element of voiceUser[1])
				{
					 if (element == 'соус')
					 {

						if (document.querySelector('#pizza').style.background == '')
						{

							result ('Я просил соус, где он ?', -1);
							break;
						}

					 } else if (element == 'pepperoni'){

						var i = 0;
						for (var n of document.querySelectorAll('#tableGame > div[style][class]'))
						{

							if (n.className == 'pepperoni') i++;
						}

						if (i == 0)
						{

							result ('Я просил колбаску, где она ?', -1);
							break;

						} else if (i < 6){

							result ('Мало пипперони', -1);
							break;	

						} else result ('Хорошая пицца', +1);
					 }
				}
			}
		}
		
		function result (text, money)
		{

			textRe = text;
			textRead ();
			document.querySelector('#moneyBlock').innerHTML = '<mo style="color: rgb(32, 167, 32)">$ </mo>' + (Number(document.querySelector('#moneyBlock').innerText.split(' ')[1]) + money);
			setTimeout(function (){document.querySelector('#user').style.bottom = '-100px'}, 1000);
			setTimeout(gameStart, 2000);
			deletePizza ();
			document.querySelector('#notification').innerText = '$' + money;
			document.querySelector('#notification').style.opacity = 1;
			document.querySelector('#notification').style.top = '50px';

			if (money == 1) document.querySelector('#notification').style.color = '#1cbd20';
			else document.querySelector('#notification').style.color = '#d75151';

			setTimeout(function (){document.querySelector('#notification').style.opacity = 0}, 1000);
			setTimeout(function (){document.querySelector('#notification').removeAttribute('style')}, 1500);
		}

	</script>
</html>
